# Server Configuration
PORT=5000
NODE_ENV=development

# Database Configuration
MONGODB_URI=mongodb+srv://<username>:<password>@cluster0.xxxxx.mongodb.net/<dbname>

# Application Configuration
APP_NAME=Docketra

# Security Configuration
JWT_SECRET=your_jwt_secret_here_change_in_production

# Rate Limiting Configuration (Redis)
# Rate limiting protects the API from abuse (brute-force, scraping, DoS)
# Redis is used for distributed rate limiting across multiple instances
# 
# For development: Leave REDIS_URL empty to use in-memory store (single instance only)
# For production: REQUIRED - Set REDIS_URL to your Redis instance
#
# Format: redis://[username]:[password]@hostname:port
# Examples:
#   REDIS_URL=redis://localhost:6379
#   REDIS_URL=redis://:password@redis.example.com:6379
#   REDIS_URL=redis://username:password@redis.example.com:6379
#
REDIS_URL=

# Superadmin Bootstrap Configuration
# SuperAdmin exists ONLY in .env (NEVER stored in MongoDB)
# Used for platform-level governance and firm management
# SuperAdmin CANNOT access firm data (clients, users, cases)
# SuperAdmin CAN create firms, activate/suspend firms, create firm admins
# 
# CRITICAL: Change these values before deploying to production
# CRITICAL: Keep SUPERADMIN_PASSWORD secure and never commit to Git
#
SUPERADMIN_XID=SUPERADMIN
SUPERADMIN_EMAIL=superadmin@docketra.local
SUPERADMIN_PASSWORD=SuperSecure@123
SUPERADMIN_OBJECT_ID=000000000000000000000001

# Admin Seeding Configuration
# Set to 'true' to enable admin user seeding/reseeding
# Default: disabled (prevents password resets on deploy)
# SEED_ADMIN=true

# Production Frontend URL (for CORS)
# Set this to your production frontend URL when deploying
# Example: FRONTEND_URL=https://docketra.onrender.com
FRONTEND_URL=https://your-production-domain.com

# Email Configuration
# Production: Uses Brevo Transactional Email API (recommended)
# Development: Logs emails to console only
#
# For production email delivery via Brevo:
#   1. Sign up at https://www.brevo.com/
#   2. Generate an API key from Settings > SMTP & API
#   3. Set BREVO_API_KEY to your API key
#   4. Set MAIL_FROM to your verified sender email
#
# Required for production:
# BREVO_API_KEY=your-brevo-api-key-here
#
# MAIL_FROM format: "Name <email@domain>" or just "email@domain"
# Examples:
#   MAIL_FROM="Docketra <noreply@yourdomain.com>"
#   MAIL_FROM=noreply@yourdomain.com
#
# Legacy SMTP Configuration (deprecated - for development only)
# SMTP variables are no longer used in production
# Configure these only if you need SMTP for local development testing
# SMTP_HOST=smtp.example.com
# SMTP_PORT=587
# SMTP_USER=your-smtp-username
# SMTP_PASS=your-smtp-password
# SMTP_FROM=noreply@example.com

# Google OAuth for BYOS (Bring Your Own Storage)
# Required to let firm admins connect their own Google Drive via OAuth 2.0.
# Get these from Google Cloud Console > APIs & Services > Credentials.
#
# GOOGLE_OAUTH_REDIRECT_URI must match one of the "Authorized redirect URIs"
# configured in your OAuth 2.0 Client ID (e.g. https://api.yourdomain.com/api/storage/google/callback).
#
# STORAGE_TOKEN_SECRET: used to AES-256-CBC encrypt OAuth refresh/access tokens
# before persisting them in MongoDB. Must be a long random string (32+ chars recommended).
#
# GOOGLE_CLIENT_ID and GOOGLE_CLIENT_SECRET are shared with the Google Sign-In
# feature and are already declared above in the Google Drive section.
#
GOOGLE_OAUTH_REDIRECT_URI=
STORAGE_TOKEN_SECRET=

# =========================================================================
# Encryption Configuration (Envelope Encryption — AES-256-GCM)
# =========================================================================
# MASTER_ENCRYPTION_KEY: 32-byte Key Encryption Key (KEK) used to wrap
#   per-tenant Data Encryption Keys (DEKs).  Accepts hex (64 chars) or
#   base64 (44 chars) encoding.
#
#   Generate a key:
#     node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
#
#   REQUIRED unless ENCRYPTION_PROVIDER=disabled.
#   The application will refuse to start without it (startup validation always fails).
#
# ENCRYPTION_PROVIDER: Selects the encryption backend.
#   local    — AES-256-GCM using MASTER_ENCRYPTION_KEY (default)
#   kms      — Google Cloud KMS (stub, not yet implemented)
#   disabled — Explicitly opt out of encryption (legacy / test environments)
#              WARNING: data will be stored in plaintext
#
MASTER_ENCRYPTION_KEY=
ENCRYPTION_PROVIDER=local
